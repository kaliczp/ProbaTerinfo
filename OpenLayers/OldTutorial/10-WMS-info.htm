<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="http://openlayers.org/en/v3.9.0/css/ol.css" type="text/css"> <!-- styles for OpenLayers -->
		<script src="http://openlayers.org/en/v3.9.0/build/ol.js" type="text/javascript"></script> <!-- Loading OpenLayers Library -->
		<title>OpenLayers 3 example</title>
	</head>
	<body>
		<div id="map" style="width: 100%; height: 500px"></div> <!-- Map Render target -->
		<div id="info" style="width: 100%; height: 80px"></div> <!-- Info Display -->
		<script>
		
			var wmsSource=new ol.source.TileWMS( // creating a WMS source variable
			{
				url: 'http://demo.boundlessgeo.com/geoserver/wms',
				params: {'LAYERS': 'topp:states', 'TILED': true},
				serverType: 'geoserver'
			});
		
			var map=new ol.Map( // creating a new OpenLayers Map object
			{
				layers: // enumerating layers: Image, Tile or Vector
				[
					new ol.layer.Tile( // new TileMap
					{
						source: new ol.source.MapQuest({ layer:'sat' }) // Satellite Image - Tile based, layers: sat, osm, hyb
					}),
					
					new ol.layer.Tile( // tiled layer
					{
						extent: [-13884991, 2870341, -7455066, 6338219],
						source: wmsSource
					})
				],
				
				view: new ol.View( // new View
				{
					center: [-10997148, 4569099], // center point
					zoom: 4 // zoom level
				}),

				target: 'map' // set render target
			});
			
			// WMS request: getFeatureInfo
			map.on('singleclick', function(evt) // define an event listener for click
			{
				document.getElementById('info').innerHTML = ''; // clear the info object
				var viewResolution = map.getView().getResolution(); // query the resolution
				var url = wmsSource.getGetFeatureInfoUrl( // query the feature info from event coordinates
					evt.coordinate, viewResolution, 'EPSG:3857', {'INFO_FORMAT': 'text/html'} ); // coords, resolution, procjection, output format
				if(url) // if we have results
				{
					document.getElementById('info').innerHTML = // display it
						'<iframe seamless src="' + url + '"></iframe>'; // in a frame
				}
			});
			
		</script>
	</body>
</html>